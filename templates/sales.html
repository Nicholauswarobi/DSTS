<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Recording</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/styles.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='images/dstsICON.png') }}" type="image/x-icon">
</head>
<body>
    <header>
        <h1>Sales Recording</h1>
        <p>Record daily transactions and manage customer purchases.</p>
    </header>

    <nav>
        <ul>
            <li><a href="{{ url_for('dsts') }}">Dashboard</a></li>
            <li><a href="{{ url_for('inventory') }}">Inventory Updates</a></li>
            <li><a href="{{ url_for('expenses') }}">Expenses and Debts</a></li>
            <li><a href="{{ url_for('financial') }}">Financial Tracking</a></li>
        </ul>
    </nav>

    <main>
        <!-- Button to Open Sales Form -->
        <div class="center-button">
            <button id="addSaleBtn">Record New Sale</button>
        </div>

        <!-- Sales Form Modal -->
        <div id="salesFormModal" class="sales-form-modal hidden">
            <div class="sales-form-modal-content">
                <h3>Record New Sale</h3>
                <form id="salesForm">
                    <label for="productSelect">Product:</label>
                    <select id="productSelect" name="productSelect" required>
                        <option value="">Select a product</option>
                        <!-- Options will be dynamically added -->
                    </select>

                    <label for="quantityInput">Quantity:</label>
                    <input type="number" id="quantityInput" name="quantityInput" min="1" required>

                    <label for="priceDisplay">Price:</label>
                    <input type="text" id="priceDisplay" name="priceDisplay" readonly>

                    <label for="paymentMethod">Payment Method:</label>
                    <select id="paymentMethod" name="paymentMethod" required>
                        <option value="">Select a payment method</option>
                        <option value="cash">Cash</option>
                        <option value="credit">Credit</option>
                        <option value="mobile">Mobile Payment</option>
                    </select>

                    <button class="add-sales-btn" type="submit">Add Sale</button>
                    <button type="button" id="cancelSaleBtn">Cancel</button>
                </form>
            </div>
        </div>

        <!-- Past Sales Table -->
        <div class="sales-table">
            <h3>Sales Record</h3>
            <table id="pastSalesTable">
                <thead>
                    <tr>
                        <th>Product Name</th>
                        <th>Quantity</th>
                        <th>Price</th>
                        <th>Total</th>
                        <th>Payment Method</th>
                        <th>Date & Time</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Past sales will be dynamically added here -->
                </tbody>
            </table>
        </div>

        <!-- Edit Sale Modal -->
        <div id="editSaleModal" class="edit-sale-modal hidden">
            <div class="edit-sale-modal-content">
                <span class="close" id="closeEditSaleModal">&times;</span>
                <h3>Edit Sale</h3>
                <form id="editSaleForm">
                    <input type="hidden" id="editSaleId" name="saleId">
                    <label for="editQuantity">Quantity:</label>
                    <input type="number" id="editQuantity" min="1" required>
                    <label for="editPaymentMethod">Payment Method:</label>
                    <select id="editPaymentMethod" required>
                        <option value="cash">Cash</option>
                        <option value="credit">Credit</option>
                        <option value="mobile">Mobile Payment</option>
                    </select>
                    <button type="submit">Save Changes</button>
                    <button type="button" id="cancelEditSale">Cancel</button>
                </form>
            </div>
        </div>

        <!-- Delete Sale Confirmation Modal -->
        <div id="deleteSaleModal" class="delete-sale-modal hidden">
            <div class="delete-sale-modal-content">
                <p>Are you sure you want to delete this sale?</p>
                <div class="delete-sale-modal-actions">
                    <button id="confirmDeleteSaleBtn" class="confirm-delete-sale-btn">Yes, Delete</button>
                    <button id="cancelDeleteSaleBtn" class="cancel-delete-sale-btn">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Sales Notification Popup -->
        <div id="salesNotification" class="sales-notification hidden"></div>
    </main>

    <footer>
        <p>&copy; 2025 DSTS. All rights reserved.</p>
    </footer>

    <script src="{{ url_for('static', filename='scripts/sales.js') }}"></script>
</body>
</html>